{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '52850733-d97c0fbc64eee6c455900e64a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Pixabay API error:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loader = document.getElementById('loader');\nconst loadMoreButton = document.getElementById('load-more');\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      img => `\n        <li class=\"gallery-item\">\n          <a href=\"${img.largeImageURL}\">\n            <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n            <p><b>Likes:</b> ${img.likes}</p>\n            <p><b>Views:</b> ${img.views}</p>\n            <p><b>Comments:</b> ${img.comments}</p>\n            <p><b>Downloads:</b> ${img.downloads}</p>\n          </div>\n        </li>`\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.classList.add('hidden');\n}\n","import './css/reset.css';\nimport './css/base.css';\nimport './css/styles.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\n\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\nconst loadMoreBtn = document.getElementById('load-more');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nconst perPage = 15;\n\nhideLoadMoreButton();\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  currentQuery = input.value.trim();\n  if (!currentQuery) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search term.' });\n    return;\n  }\n\n  currentPage = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.info({ title: 'No results', message: 'No images found.' });\n      return;\n    }\n\n    totalHits = data.totalHits;\n    createGallery(data.hits);\n\n    if (totalHits > currentPage * perPage) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'End',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    iziToast.error({ title: 'Error', message: 'Something went wrong.' });\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  showLoader();\n  hideLoadMoreButton();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.info({\n        title: 'End',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      hideLoadMoreButton();\n      return;\n    }\n\n    createGallery(data.hits);\n\n    if (totalHits > currentPage * perPage) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'End',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    const galleryItem = document.querySelector('.gallery li');\n    if (galleryItem) {\n      const { height: cardHeight } = galleryItem.getBoundingClientRect();\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n  } catch (err) {\n    console.error(err);\n    iziToast.error({ title: 'Error', message: 'Something went wrong.' });\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","error","galleryContainer","lightbox","SimpleLightbox","loader","loadMoreButton","createGallery","images","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","loadMoreBtn","currentQuery","currentPage","totalHits","perPage","onSearch","onLoadMore","e","iziToast","data","err","galleryItem","cardHeight"],"mappings":"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"}